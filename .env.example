# ==============================================================================
# BSK-SER Environment Configuration Template
# ==============================================================================
# Copy this file to .env and fill in your actual values
# DO NOT commit .env file to version control!
# ==============================================================================

# ------------------------------------------------------------------------------
# DATABASE CONFIGURATION (Required)
# ------------------------------------------------------------------------------
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=YOUR_PASSWORD_HERE
DB_NAME=bsk

# Constructed DATABASE_URL (used by SQLAlchemy)
# Format: postgresql://{user}:{password}@{host}:{port}/{database}
DATABASE_URL=postgresql://${DB_USER}:${DB_PASSWORD}@${DB_HOST}:${DB_PORT}/${DB_NAME}

# Database connection pool settings
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=40

# Echo SQL queries to console (true/false) - use false in production
ECHO_SQL=false

# ------------------------------------------------------------------------------
# EXTERNAL BSK SERVER API (Required for sync)
# ------------------------------------------------------------------------------
EXTERNAL_SYNC_URL=https://bsk-server.gov.in/api/sync
EXTERNAL_LOGIN_URL=https://bsk-server.gov.in/api/auth/login
JWT_USERNAME=StateCouncil
JWT_PASSWORD=Council@2531

# ------------------------------------------------------------------------------
# OPENAI API (Optional - for content-based recommendations)
# ------------------------------------------------------------------------------
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_EMBEDDING_MODEL=text-embedding-3-small
OPENAI_CHAT_MODEL=gpt-4
OPENAI_MAX_TOKENS=1000
OPENAI_TEMPERATURE=0.7

# ------------------------------------------------------------------------------
# APPLICATION SERVER
# ------------------------------------------------------------------------------
API_HOST=0.0.0.0
API_PORT=8000
API_RELOAD=true

# CORS (comma-separated origins, use * for all)
CORS_ORIGINS=*

# ------------------------------------------------------------------------------
# SECURITY (Important!)
# ------------------------------------------------------------------------------
# Generate a secure random key for admin endpoints:
# python -c "import secrets; print(secrets.token_urlsafe(32))"
ADMIN_API_KEY=GENERATE_SECURE_KEY_HERE

# Secret key for JWT/sessions
SECRET_KEY=GENERATE_SECURE_KEY_HERE

# ------------------------------------------------------------------------------
# SCHEDULER CONFIGURATION
# ------------------------------------------------------------------------------
SCHEDULER_TIMEZONE=Asia/Kolkata

# Weekly sync schedule (day: mon, tue, wed, thu, fri, sat, sun)
SYNC_DAY_OF_WEEK=sun
SYNC_HOUR=0
SYNC_MINUTE=0

# Delay before regenerating static files after sync (in hours)
STATIC_REGEN_DELAY_HOURS=1

# ------------------------------------------------------------------------------
# FEATURE FLAGS
# ------------------------------------------------------------------------------
ENABLE_SCHEDULER=true
ENABLE_OPENAI_RECOMMENDATIONS=true
ENABLE_DEMOGRAPHIC_CLUSTERING=true

# ------------------------------------------------------------------------------
# PERFORMANCE TUNING
# ------------------------------------------------------------------------------
MAX_RECOMMENDATIONS=10
CACHE_TTL=3600
DEFAULT_PAGE_SIZE=50
MAX_PAGE_SIZE=500

# ------------------------------------------------------------------------------
# DEBUG & LOGGING
# ------------------------------------------------------------------------------
DEBUG=false
LOG_LEVEL=INFO
LOG_FILE=/var/log/bsk-ser/app.log

# ==============================================================================
# NOTES:
# ==============================================================================
# 1. Replace all YOUR_*_HERE placeholders with actual values
# 2. Generate secure keys using: python -c "import secrets; print(secrets.token_urlsafe(32))"
# 3. URL-encode passwords with special characters:
#    @ becomes %40
#    # becomes %23
#    Example: Pass@123# becomes Pass%40123%23
# 4. Set DEBUG=false and API_RELOAD=false in production
# 5. Use specific CORS_ORIGINS in production (not *)
# ==============================================================================
